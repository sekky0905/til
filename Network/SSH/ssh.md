# SSHのまとめ

## 認証

認証と

### ユーザー認証

#### Password認証

#### 公開鍵認証

### ホスト認証

## フォワーディング

### ポートフォワーディング

- 他のTCP上のプロトコルのセッションをSSHセッション上で安全に転送させる機能
- 他のTCP上のプロトコルが安全に通信をできるSSHが提供する通り道をトンネルと言うこともあり、トンネリングと呼ばれることもある

#### 例

##### SSHポートフォワーディングを使用しない例

- SMTPプロトコルを通じてクライアントから、メールサーバへ電子メールを送信するとする
- 通常の場合、SMTPプロトコルを使用してSMTPサーバにアクセスする際には25番ポートを使用するので、TCP上の25番ポートを通じてデータがやりとりされる
- そのまま素直にSMTPを使用してクライアントとSMTPサーバ間でやりとりすると、その間を流れるデータは暗号化されずに平文で流れる

##### SSHポートフォワーディングを使用した例

- クライント側とサーバ側をSSHセッションで結ぶトンネルを作成する
    - その際にクライアント側でその時点で使用されていないポート番号を指定しておく
        - ここでは仮に2000とする
        - これがトンネルの入り口になる
    - クライアントがサーバに対してSMTPでデータを送信する場合、クライアントはこのポート番号2000からデータを送信する
    - そうすると、先ほど作成されたクライント側とサーバ側をSSHセッションで結ぶトンネルを通じてサーバ側にデータが送信される
        - SSHセッションで結ぶトンネルを通じてデータが送信されるので、データは暗号化される
        - クラインアントの2000番ポート→SSHセッション上(トンネル)→サーバ上の25番ポートと言う流れで送信される

#### ローカルフォワード

#### リモートフォワード

### エージェントフォワーディング

## 多段SSH
